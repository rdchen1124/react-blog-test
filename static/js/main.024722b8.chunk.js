(this.webpackJsonphooks_todo=this.webpackJsonphooks_todo||[]).push([[0],{35:function(n,t,e){"use strict";e.r(t);var c,i,o,a,r,s,d=e(0),b=e(20),j=e.n(b),x=e(6),p=e(2),l=e(3),u=e(10),h=e(4),O=Object(d.createContext)(null),f="token",g=function(n){window.localStorage.setItem(f,n)},v=function(){return window.localStorage.getItem(f)},m=e(1),w=l.a.div(c||(c=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 60px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.3);\n  box-sizing: border-box;\n  padding: 0px 32px; \n"]))),y=l.a.div(i||(i=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  height: 60px;\n"]))),k=Object(l.a)(u.b)(o||(o=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  height: 100%;\n  width: 100px;\n  cursor: pointer;\n  color: blue;\n  text-decoration: none;\n  ","\n"])),(function(n){return n.$active&&"\n    background: rgba(0, 0, 0, 0.2);\n  "})),S=l.a.div(a||(a=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  "," {\n    margin-left: 10px;\n  }\n"])),y),z=l.a.div(r||(r=Object(p.a)(["\n  display: flex;\n"]))),C=l.a.div(s||(s=Object(p.a)(["\n  font-size: 32px;\n  font-weight:bold;\n"])));var A,B,I,_,D,E,J,$=function(){var n=Object(h.g)(),t=Object(d.useContext)(O),e=t.user,c=t.setUser,i=Object(h.f)();return Object(m.jsxs)(w,{children:[Object(m.jsxs)(S,{children:[Object(m.jsx)(C,{children:"MediRyan"}),Object(m.jsxs)(y,{children:[Object(m.jsx)(k,{to:"/",$active:"/"===n.pathname,children:"\u9996\u9801"}),e&&Object(m.jsx)(k,{to:"/post",$active:"/post"===n.pathname,children:"\u767c\u8868\u6587\u7ae0"})]})]}),Object(m.jsx)(z,{children:Object(m.jsxs)(y,{children:[!e&&Object(m.jsx)(k,{to:"/login",$active:"/login"===n.pathname,children:"\u767b\u5165"}),e&&Object(m.jsx)(k,{as:"div",onClick:function(){g(""),c(null),"/"!==n.pathname&&i.push("/")},children:"\u767b\u51fa"})]})})]})},L="https://student-json-api.lidemy.me",N=function(){var n=v();return fetch("".concat(L,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},P=l.a.div(A||(A=Object(p.a)(["\n  width: 90%;\n  margin: 0 auto;\n  background: white;\n"]))),U=l.a.div(B||(B=Object(p.a)(["\n  font-size: 28px;\n  font-weight: bold;\n  color: black;\n  padding-left: 30px;\n  margin-bottom: 10px;\n"]))),T=l.a.div(I||(I=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2); \n  padding: 16px;\n  align-items: flex-end;\n"]))),M=Object(l.a)(u.b)(_||(_=Object(p.a)(["\n  font-size: 20px;\n  color: #008CBA;\n  text-decoration: none;\n"]))),R=l.a.div(D||(D=Object(p.a)(["\n  color: grey;\n"]))),q=l.a.div(E||(E=Object(p.a)(["\n  padding: 10px 5px;\n  box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.3);\n"])));function F(n){var t=n.post;return Object(m.jsxs)(T,{children:[Object(m.jsx)(M,{to:"/posts/".concat(t.id),children:t.title}),Object(m.jsx)(R,{children:new Date(t.createdAt).toLocaleString()})]})}function G(){var n=Object(d.useState)([]),t=Object(x.a)(n,2),e=t[0],c=t[1];return Object(d.useEffect)((function(){fetch("".concat(L,"/posts?_sort=createdAt&_order=desc&_limit=").concat(10)).then((function(n){return n.json()})).then((function(n){return c(n)}))}),[]),Object(m.jsxs)(P,{children:[Object(m.jsx)(U,{children:"\u6587\u7ae0\u5217\u8868"}),Object(m.jsx)(q,{children:e&&e.map((function(n){return Object(m.jsx)(F,{post:n},n.id)}))})]})}var H,K,Q,V,W,X,Y,Z,nn,tn,en,cn,on,an,rn=l.a.div(J||(J=Object(p.a)(["\n  background: red;\n  color: white;\n  padding: 2px 5px;\n  width: 300px;\n"])));function sn(){var n=Object(d.useContext)(O).setUser,t=Object(d.useState)(""),e=Object(x.a)(t,2),c=e[0],i=e[1],o=Object(d.useState)(""),a=Object(x.a)(o,2),r=a[0],s=a[1],b=Object(d.useState)(""),j=Object(x.a)(b,2),p=j[0],l=j[1],u=Object(h.f)();return Object(m.jsxs)("form",{onSubmit:function(t){t.preventDefault(),l(""),function(n,t){return fetch("".concat(L,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(c,r).then((function(t){if(0===t.ok)return l(t.message);g(t.token),N().then((function(t){if(1!==t.ok)return g(null),l(t.message);n(t.data),u.push("/")}))}))},children:[Object(m.jsxs)("div",{children:["username: "," ",Object(m.jsx)("input",{type:"text",value:c,onChange:function(n){return i(n.target.value)}})]}),Object(m.jsxs)("div",{children:["password: "," ",Object(m.jsx)("input",{type:"password",value:r,onChange:function(n){return s(n.target.value)}})]}),Object(m.jsx)("button",{children:"send"}),p&&Object(m.jsx)(rn,{children:p.toString()})]})}var dn=l.a.div(H||(H=Object(p.a)(["\n  margin: 0 auto;\n  width: 90%;\n  background: white;\n"]))),bn=l.a.div(K||(K=Object(p.a)(["\n  font-size: 28px;\n  font-weight: bold;\n  color: black;\n  padding-left: 30px;\n  margin-bottom: 10px;\n"]))),jn=l.a.div(Q||(Q=Object(p.a)(["\n  padding: 10px 20px;\n  box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.3);\n  position: relative;\n  padding-bottom: 28px;\n"]))),xn=l.a.form(V||(V=Object(p.a)(["\n"]))),pn=l.a.div(W||(W=Object(p.a)(["\n  display: block;\n  color: #008CBA;\n  font-size: 16px;\n  font-weight: bold;\n  margin: 5px 10px;\n  & + & {\n    margin-top: 10px;\n  }\n  div + div {\n    margin-top: 10px;\n  }\n"]))),ln=l.a.input(X||(X=Object(p.a)(["\n  width: 100%;\n  padding: 5px 5px;\n  box-sizing: border-box;\n  border: 1px solid rgba(0, 0, 0, 0.3);\n  border-radius: 3px;\n"]))),un=l.a.textarea(Y||(Y=Object(p.a)(["\n  width: 100%;\n  padding: 8px 5px;\n  height: 300px;\n  box-sizing: border-box;\n  border-radius: 5px;\n"]))),hn=l.a.button(Z||(Z=Object(p.a)(["\n  height: 30px;\n  padding: 3px 5px;\n  background-color: white;\n  color: black;\n  font-size: 16px;\n  border: 1px solid #008CBA;\n  border-radius: 3px;\n  cursor: pointer;\n  transition-duration: 0.3s;\n  &:hover {\n    background: #008CBA;\n    color: white;\n  }\n"]))),On=l.a.div(nn||(nn=Object(p.a)(["\n  position: absolute;\n  background: red;\n  color: white;\n  padding: 2px 5px;\n  border-radius: 3px;\n  bottom: 1px;\n  right:30px;\n  left:30px;\n"])));function fn(){var n=Object(d.useContext)(O).user,t=Object(d.useState)(""),e=Object(x.a)(t,2),c=e[0],i=e[1],o=Object(d.useState)(""),a=Object(x.a)(o,2),r=a[0],s=a[1],b=Object(d.useState)(""),j=Object(x.a)(b,2),p=j[0],l=j[1],u=Object(h.f)();return Object(m.jsxs)(dn,{children:[Object(m.jsx)(bn,{children:"\u65b0\u589e\u6587\u7ae0"}),Object(m.jsx)(jn,{children:Object(m.jsxs)(xn,{onSubmit:function(t){if(t.preventDefault(),l(""),!n)return l("\u60a8\u6c92\u6709\u6b0a\u9650\u65b0\u589e\u6587\u7ae0");(function(n,t){var e=v();return fetch("".concat(L,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(e),"content-type":"application/json"},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))})(c,r).then((function(n){if(0===n.ok)return l(n.message);u.push("/")}))},children:[Object(m.jsxs)(pn,{children:[Object(m.jsxs)("div",{children:["\u6587\u7ae0\u6a19\u984c:"," "]}),Object(m.jsx)("div",{children:Object(m.jsx)(ln,{type:"text",value:c,onChange:function(n){i(n.target.value)}})})]}),Object(m.jsxs)(pn,{children:[Object(m.jsxs)("div",{children:["\u6587\u7ae0\u5167\u5bb9:"," "]}),Object(m.jsx)("div",{children:Object(m.jsx)(un,{type:"text",value:r,onChange:function(n){s(n.target.value)}})})]}),Object(m.jsx)(pn,{children:Object(m.jsx)(hn,{children:"\u767c\u5e03\u6587\u7ae0"})}),p&&Object(m.jsx)(On,{children:p.toString()})]})})]})}var gn,vn=l.a.div(tn||(tn=Object(p.a)(["\n  width: 90%;\n  margin: 0 auto;\n  background: white;\n"]))),mn=l.a.div(en||(en=Object(p.a)(["\n  padding: 5px 10px;\n"]))),wn=l.a.div(cn||(cn=Object(p.a)(["\n  font-size: 28px;\n  font-weight: bold;\n  color: #008CBA;\n"]))),yn=l.a.div(on||(on=Object(p.a)(["\n  margin-top: 10px;\n  white-space: pre-line;\n  padding: 10px 0px;\n  border-top: 1px solid rgba(0, 0, 0, 0.2);\n"]))),kn=l.a.div(an||(an=Object(p.a)(["\n  font-size: 12px;\n  color: grey;\n"])));function Sn(n){var t=n.article;return Object(m.jsxs)(mn,{children:[Object(m.jsx)(wn,{children:t.title}),Object(m.jsx)(yn,{children:t.body}),Object(m.jsx)(kn,{children:new Date(t.createdAt).toLocaleString()})]})}function zn(){var n=Object(h.h)().postId,t=Object(d.useState)({}),e=Object(x.a)(t,2),c=e[0],i=e[1];return Object(d.useEffect)((function(){var t;(t=Number(n),fetch("".concat(L,"/posts?id=").concat(t)).then((function(n){return n.json()}))).then((function(n){return i(n[0])}))}),[n]),Object(m.jsx)(vn,{children:Object(m.jsx)(Sn,{article:c})})}var Cn=l.a.div(gn||(gn=Object(p.a)(["\n  padding-top: 60px;\n"])));var An=function(){var n=Object(d.useState)(null),t=Object(x.a)(n,2),e=t[0],c=t[1];return Object(d.useLayoutEffect)((function(){v()&&N().then((function(n){n.ok&&c(n.data)}))}),[]),Object(m.jsx)(O.Provider,{value:{user:e,setUser:c},children:Object(m.jsx)(Cn,{children:Object(m.jsxs)(u.a,{children:[Object(m.jsx)($,{}),Object(m.jsxs)(h.c,{children:[Object(m.jsx)(h.a,{exact:!0,path:"/",children:Object(m.jsx)(G,{})}),Object(m.jsx)(h.a,{path:"/post",children:Object(m.jsx)(fn,{})}),Object(m.jsx)(h.a,{path:"/posts/:postId",children:Object(m.jsx)(zn,{})}),Object(m.jsx)(h.a,{path:"/login",children:Object(m.jsx)(sn,{})})]})]})})})};j.a.render(Object(m.jsx)(An,{}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.024722b8.chunk.js.map